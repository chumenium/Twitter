# Twitter風SNSアプリ 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
Twitter風SNSアプリ（MicroBoard）

### 1.2 プロジェクトの目的
- ユーザーが短い投稿（最大280文字）を共有できるSNSプラットフォームの構築
- 画像投稿、いいね、ブックマーク機能を備えたモダンなWebアプリケーション
- レスポンシブデザインによるマルチデバイス対応

### 1.3 技術スタック
- **バックエンド**: Django 5.2.3 + Django REST Framework
- **フロントエンド**: React 19.1.0 + TypeScript 4.9.5
- **データベース**: SQLite（開発環境）
- **認証**: Django認証システム
- **画像処理**: Pillow
- **API通信**: Axios
- **ルーティング**: React Router DOM

## 2. 機能要件

### 2.1 ユーザー認証機能
#### 2.1.1 ユーザー登録
- **機能**: 新規ユーザーのアカウント作成
- **入力項目**:
  - ユーザー名（必須）
  - メールアドレス（必須）
  - パスワード（必須）
  - パスワード確認（必須）
- **制約**:
  - ユーザー名は一意であること
  - パスワードは8文字以上
  - メールアドレスは有効な形式であること

#### 2.1.2 ユーザーログイン
- **機能**: 既存ユーザーの認証
- **入力項目**:
  - ユーザー名またはメールアドレス
  - パスワード
- **制約**: 認証失敗時は適切なエラーメッセージを表示

#### 2.1.3 ユーザーログアウト
- **機能**: セッション終了
- **動作**: ログアウト後はログインページにリダイレクト

### 2.2 投稿機能
#### 2.2.1 投稿作成
- **機能**: 新しい投稿の作成
- **入力項目**:
  - 投稿内容（テキスト、最大280文字）
  - 画像（オプション）
- **制約**:
  - 投稿内容は必須
  - 画像サイズ制限（5MB以下）
  - 対応画像形式：JPG、PNG、GIF

#### 2.2.2 投稿表示
- **機能**: 投稿の一覧表示（タイムライン）
- **表示項目**:
  - ユーザー名
  - 投稿内容
  - 投稿画像（存在する場合）
  - 投稿日時
  - いいね数
  - いいね状態（自分のいいね状況）
  - ブックマーク状態（自分のブックマーク状況）

#### 2.2.3 投稿編集
- **機能**: 自分の投稿の編集
- **制約**: 自分の投稿のみ編集可能

#### 2.2.4 投稿削除
- **機能**: 自分の投稿の削除
- **制約**: 自分の投稿のみ削除可能

### 2.3 いいね機能
#### 2.3.1 いいね追加
- **機能**: 投稿へのいいね
- **制約**: 同じ投稿に複数回いいねできない

#### 2.3.2 いいね解除
- **機能**: いいねの取り消し
- **動作**: いいね済みの投稿を再度クリックで解除

#### 2.3.3 いいね数表示
- **機能**: 各投稿のいいね数を表示

### 2.4 ブックマーク機能
#### 2.4.1 ブックマーク追加
- **機能**: 投稿のブックマーク
- **制約**: 同じ投稿に複数回ブックマークできない

#### 2.4.2 ブックマーク解除
- **機能**: ブックマークの取り消し

#### 2.4.3 ブックマーク一覧
- **機能**: ブックマークした投稿の一覧表示

### 2.5 プロフィール機能
#### 2.5.1 プロフィール表示
- **表示項目**:
  - ユーザー名
  - 表示名
  - プロフィール画像
  - 自己紹介文
  - 投稿数
  - いいねした投稿数
  - ブックマークした投稿数

#### 2.5.2 プロフィール編集
- **編集項目**:
  - 表示名
  - プロフィール画像
  - 自己紹介文
- **制約**: 自分のプロフィールのみ編集可能

### 2.6 ナビゲーション機能
- **メニュー項目**:
  - ホーム（タイムライン）
  - マイページ
  - ブックマーク
  - 設定
  - ログアウト

## 3. 非機能要件

### 3.1 パフォーマンス
- ページ読み込み時間：3秒以内
- API応答時間：1秒以内
- 同時接続ユーザー数：100人以上

### 3.2 セキュリティ
- HTTPS通信の使用
- CSRFトークンの実装
- SQLインジェクション対策
- XSS対策
- 認証情報の適切な管理

### 3.3 ユーザビリティ
- レスポンシブデザイン（PC、タブレット、スマートフォン対応）
- 直感的なUI/UX
- アクセシビリティ対応
- エラーメッセージの分かりやすさ

### 3.4 保守性
- コードの可読性
- 適切なコメント
- 型安全性（TypeScript使用）
- モジュール化された設計

## 4. データモデル

### 4.1 User（Django標準）
- id: 主キー
- username: ユーザー名（一意）
- email: メールアドレス
- password: パスワード（ハッシュ化）

### 4.2 Profile
- user: Userとの1対1関係
- name: 表示名
- image: プロフィール画像
- bio: 自己紹介文

### 4.3 Post
- user: 投稿者（Userとの外部キー）
- content: 投稿内容（最大280文字）
- image: 投稿画像
- created_at: 投稿日時

### 4.4 Like
- user: いいねしたユーザー
- post: いいねされた投稿
- created_at: いいね日時

### 4.5 Bookmark
- user: ブックマークしたユーザー
- post: ブックマークされた投稿
- created_at: ブックマーク日時

## 5. API仕様

### 5.1 認証API
- POST /api/auth/register/ - ユーザー登録
- POST /api/auth/login/ - ユーザーログイン
- POST /api/auth/logout/ - ユーザーログアウト
- GET /api/auth/user/ - 現在のユーザー情報取得
- PUT /api/auth/profile/ - プロフィール更新

### 5.2 投稿API
- GET /api/posts/ - 投稿一覧取得
- POST /api/posts/ - 新規投稿作成
- GET /api/posts/{id}/ - 投稿詳細取得
- PUT /api/posts/{id}/ - 投稿更新
- DELETE /api/posts/{id}/ - 投稿削除
- POST /api/posts/{id}/toggle_like/ - いいね切り替え
- POST /api/posts/{id}/toggle_bookmark/ - ブックマーク切り替え

### 5.3 特殊エンドポイント
- GET /api/posts/timeline/ - タイムライン取得
- GET /api/posts/my_posts/ - 自分の投稿取得
- GET /api/posts/liked_posts/ - いいねした投稿取得
- GET /api/posts/bookmarked_posts/ - ブックマークした投稿取得

## 6. 画面設計

### 6.1 認証画面
- ログイン画面
- ユーザー登録画面

### 6.2 メイン画面
- タイムライン画面（ホーム）
- 投稿作成画面
- 投稿詳細画面

### 6.3 ユーザー関連画面
- マイページ画面
- プロフィール編集画面
- 設定画面

### 6.4 その他画面
- ブックマーク一覧画面
- エラー画面（404、500等）

## 7. 開発環境

### 7.1 開発ツール
- **IDE**: Visual Studio Code
- **バージョン管理**: Git
- **パッケージマネージャー**: npm（フロントエンド）、pip（バックエンド）

### 7.2 開発サーバー
- **バックエンド**: Django開発サーバー（ポート8000）
- **フロントエンド**: React開発サーバー（ポート3000）

### 7.3 データベース
- **開発環境**: SQLite
- **本番環境**: PostgreSQL（予定）

## 8. デプロイ要件

### 8.1 本番環境
- **Webサーバー**: Nginx
- **アプリケーションサーバー**: Gunicorn
- **データベース**: PostgreSQL
- **ファイルストレージ**: AWS S3（画像保存用）

### 8.2 CI/CD
- 自動テスト実行
- 自動デプロイ
- コード品質チェック

## 9. 制約事項

### 9.1 技術的制約
- ブラウザ対応：Chrome、Firefox、Safari、Edge最新版
- 画像ファイルサイズ：5MB以下
- 投稿文字数：280文字以内

### 9.2 運用制約
- データベースバックアップ：日次
- ログローテーション：週次
- セキュリティアップデート：月次

## 10. 今後の拡張予定

### 10.1 機能拡張
- フォロー機能
- リツイート機能
- ハッシュタグ機能
- 検索機能
- 通知機能

### 10.2 技術拡張
- PWA対応
- プッシュ通知
- リアルタイム通信（WebSocket）
- モバイルアプリ開発

---

**作成日**: 2024年12月
**バージョン**: 1.0
**作成者**: 開発チーム 